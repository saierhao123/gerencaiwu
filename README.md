# 个人记账管理系统

一个基于Python开发的本地化个人记账管理系统，支持自动解析微信和支付宝账单，提供智能分类、统计分析和可视化展示功能。

## 功能特点

### 🎯 核心功能
- **多平台账单集成**: 自动识别并解析微信(.xlsx)和支付宝(.csv)账单
- **智能分类系统**: 基于关键词规则自动分类交易，支持手动调整
- **统计分析**: 提供详细的收支统计和分类分析
- **可视化展示**: 生成饼图和日历热力图等图表
- **用户友好界面**: 基于PyQt6的图形化界面

### 📊 数据处理
- 自动清洗和标准化数据格式
- 跨平台转账识别和去重
- 特殊交易处理（理财、退款等）
- 支持中文交易记录

### 🎨 可视化功能
- 支出/收入分类占比饼图
- 每日收支趋势图
- 月度日历热力图
- 详细的统计报告

## 系统要求

### 环境要求
- Python 3.8+
- Windows 10/11
- 8GB+ 内存（推荐）

### 依赖库
```
pandas>=1.5.0
openpyxl>=3.0.0
PyQt6>=6.4.0
matplotlib>=3.5.0
plotly>=5.10.0
numpy>=1.21.0
seaborn>=0.11.0
```

## 安装指南

### 1. 克隆项目
```bash
git clone <项目地址>
cd gerencaiwu
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 准备账单文件
将微信和支付宝账单文件放入 `zhangdang` 文件夹：
- 微信账单：`微信支付账单流水文件(YYYYMMDD-YYYYMMDD)_YYYYMMDDHHMMSS.xlsx`
- 支付宝账单：`支付宝交易明细(YYYYMMDD-YYYYMMDD).csv`

## 使用方法

### 方法一：图形界面（推荐）
```bash
python main.py
```

### 方法二：命令行测试
```bash
python test_system.py
```

## 功能模块

### 1. 账单解析模块 (`bill_parser.py`)
- 自动识别账单类型（微信/支付宝）
- 解析不同格式的账单文件
- 统一数据字段和格式
- 数据清洗和标准化

### 2. 交易分类模块 (`transaction_classifier.py`)
- 基于关键词的自动分类
- 支持自定义分类规则
- 用户手动分类记忆
- 跨平台转账识别

### 3. 数据可视化模块 (`data_visualizer.py`)
- 生成各类统计图表
- 支持中文字体显示
- 可自定义图表样式
- 导出统计报告

### 4. 图形界面模块 (`main.py`)
- 基于PyQt6的用户界面
- 多标签页功能展示
- 实时进度反馈
- 数据筛选和查看

## 配置说明

### 分类规则配置 (`config.json`)
系统通过配置文件管理分类规则，用户可以自定义：

```json
{
  "分类规则": {
    "支出": {
      "餐饮": ["餐厅", "外卖", "咖啡", "奶茶"],
      "交通": ["打车", "公交", "地铁"],
      "购物": ["淘宝", "天猫", "拼多多"]
    },
    "收入": {
      "工资": ["工资", "薪水"],
      "红包": ["红包", "奖励", "提现"]
    },
    "非收支": ["转账", "理财", "退款", "余额宝"]
  }
}
```

### 系统设置
- 默认文件夹路径
- 图表颜色和字体设置
- 数据处理参数

## 使用流程

1. **准备账单文件**
   - 从微信和支付宝导出账单
   - 放入 `zhangdang` 文件夹

2. **启动系统**
   - 运行 `python main.py`
   - 系统自动识别账单文件

3. **处理数据**
   - 点击"开始处理"按钮
   - 系统自动解析和分类

4. **查看结果**
   - 交易明细：查看所有交易记录
   - 统计报告：查看收支统计
   - 图表分析：查看可视化图表

## 功能特色

### 🔄 自动化处理
- 一键处理所有账单文件
- 自动识别文件格式和类型
- 智能分类和统计

### 📈 智能分析
- 多维度统计分析
- 趋势分析和对比
- 分类占比分析

### 🎨 可视化展示
- 美观的图表展示
- 支持中文显示
- 交互式图表功能

### 🔧 可扩展性
- 模块化设计
- 支持新平台扩展
- 配置化管理

## 注意事项

### 数据安全
- 所有数据本地处理，不上传云端
- 不存储敏感信息
- 每次运行结果独立

### 文件格式
- 微信账单必须为Excel格式(.xlsx)
- 支付宝账单必须为CSV格式(.csv)
- 文件名需包含平台标识

### 性能优化
- 支持单月数百条记录处理
- 后台处理，减少等待时间
- 内存优化，支持大文件处理

## 故障排除

### 常见问题

1. **依赖库安装失败**
   ```bash
   pip install --upgrade pip
   pip install -r requirements.txt
   ```

2. **中文字体显示问题**
   - 确保系统安装了SimHei字体
   - 或修改配置文件中的字体设置

3. **账单解析失败**
   - 检查文件格式是否正确
   - 确认文件名包含平台标识
   - 检查文件是否损坏

4. **GUI界面无法启动**
   ```bash
   pip install PyQt6
   python main.py
   ```

## 开发说明

### 项目结构
```
gerencaiwu/
├── zhangdang/                    # 账单文件夹
├── bill_parser.py                # 账单解析模块
├── transaction_classifier.py      # 交易分类模块
├── data_visualizer.py            # 数据可视化模块
├── main.py                       # 主程序入口
├── test_system.py                # 测试脚本
├── config.json                   # 配置文件
├── requirements.txt              # 依赖库列表
└── README.md                     # 项目说明
```

### 扩展开发
- 添加新平台支持：修改 `bill_parser.py`
- 自定义分类规则：编辑 `config.json`
- 新增图表类型：扩展 `data_visualizer.py`

## 版本历史

### v1.0.0 (2025-01-XX)
- 初始版本发布
- 支持微信和支付宝账单解析
- 基础分类和统计功能
- PyQt6图形界面

## 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 Issue
- 发送邮件
- 项目讨论区

---

**感谢使用个人记账管理系统！** 🎉 